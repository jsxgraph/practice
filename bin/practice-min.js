Assessor={JXG:typeof JXG!=="undefined"?JXG:null,extend:function(c,b){var a;for(a in b){c[a]=b[a]}}};Assessor.Base=function(){this.expanded=true;this.namespace=null;this["class"]="Base";this.parameters="[]"};Assessor.extend(Assessor.Base.prototype,{toJSON:function(){return'{"namespace": "'+(this.namespace||"null")+'","class": "'+this["class"]+'","parameters": '+this.parameters+"}"},analyze:function(){var a={};if(JSON&&JSON.parse){a=JSON.parse(this.toJSON())}return a}});Assessor.ElementList=function(c){this.points=[];this.lines=[];this.circles=[];this.polygons=[];this.angles=[];var a,b;for(a=0;a<c.objectsList.length;a++){b=c.objectsList[a];if(!b.visProp.visible||b.visProp.priv){continue}if(b.elementClass===Assessor.JXG.OBJECT_CLASS_POINT){this.points.push(b)}else{if(b.elementClass===Assessor.JXG.OBJECT_CLASS_LINE){this.lines.push(b)}else{if(b.elementClass===Assessor.JXG.OBJECT_CLASS_CIRCLE){this.circles.push(b)}else{if(b.type===Assessor.JXG.OBJECT_TYPE_ANGLE){this.angles.push(b)}else{if(b.type===Assessor.JXG.OBJECT_TYPE_POLYGON){this.polygons.push(b)}}}}}}Assessor.Utils.log("collected",this)};Assessor.ElementList.prototype=new Assessor.Base;Assessor.FixtureList=function(a){this.list={};if(a){this["import"](a)}};Assessor.FixtureList.prototype=new Assessor.Base;Assessor.extend(Assessor.FixtureList.prototype,{get:function(a){return this.list[a]},set:function(a,b){if(!this.list[a]){this.list[a]=b}return !this.list[a]},clear:function(){this.list={}},"import":function(b){var a;for(a in b.list){if(!this.list[a]){this.list[a]=b.list[a]}}},remove:function(b){var a;for(a in b.list){delete this.list[a]}},simplify:function(){var b={},a;for(a in this.list){if(this.list.hasOwnProperty(a)){b[a]=this.list[a].name}}return b}});Assessor.Verifier={};Assessor.Value={};Assessor.Verifier.Verifier=function(){this.namespace="Verifier";this["class"]="Verifier"};Assessor.Verifier.Verifier.prototype=new Assessor.Base;Assessor.extend(Assessor.Verifier.Verifier.prototype,{choose:function(b,a){return[]},verify:function(b,a){return false}});Assessor.Assessment=function(){this.namespace=null;this["class"]="Assessment";this.constraints=Assessor.Utils.expandJSON(arguments);this.fixtures=new Assessor.FixtureList()};Assessor.Assessment.prototype=new Assessor.Verifier.Verifier;Assessor.extend(Assessor.Assessment.prototype,{verify:function(a){var b=new Assessor.ElementList(a);this.fixtures.clear();return this.next(b,0)},next:function(f,c){var d,e,a,b;if(c>=this.constraints.length){Assessor.Utils.log("got a leaf!");return true}e=this.constraints[c];Assessor.Utils.log("now collecting",e.toJSON(),"fixtures are",this.fixtures.simplify());d=e.choose(f,this.fixtures);for(b=0;b<d.length;b++){Assessor.Utils.log("poss ",b,d[b].simplify())}if(d.length===0){Assessor.Utils.log("i got 0 possibilities");if(e.verify(f,this.fixtures)){Assessor.Utils.log("poss 0, verified, go next");return this.next(f,c+1)}else{Assessor.Utils.log("poss 0, not verified");return false}}else{Assessor.Utils.log("Constraint "+e.toJSON()+" generated "+d.length+" possibilities!");for(a=0;a<d.length;a++){Assessor.Utils.log("fixating",this.fixtures.simplify());this.fixtures["import"](d[a]);if(this.next(f,c+1)){return true}else{this.fixtures.remove(d[a])}}return false}},toJSON:function(){var a,b=[];for(a=0;a<this.constraints.length;a++){b.push(this.constraints[a].toJSON())}this.parameters="["+b.join(", ")+"]";return Assessor.Base.prototype.toJSON.call(this)}});Assessor.Utils={eps:0.00001,logs:[],funstructor:function(b,a){return function(){var e=function(){},d,c;e.prototype=b.prototype;d=new e;c=b.apply(d,a);return Object(c)===c?c:d}},expand:function(c,a){var d;try{d=new (this.funstructor(c,a))()}catch(b){}return d},expandJSON:function(b){var d,g,f,e=[];for(d=0;d<b.length;d++){if(!b[d].expanded){Assessor.Utils.log("not expaned");if(typeof b[d]==="string"){Assessor.Utils.log("parsing",b[d]);g=JSON.parse(b[d])}else{Assessor.Utils.log("got an object",b[d]);g=b[d]}if(g.namespace!=="null"){f=this.expand(Assessor[g.namespace][g["class"]],g.parameters)}else{f=this.expand(Assessor[g["class"]],g.parameters)}e.push(f)}else{Assessor.Utils.log("already expanded, push it to results");e.push(b[d])}}return e},expandNumber:function(a){var b=a;if(typeof a!=="undefined"&&!a.expanded){if(typeof a==="number"){b=this.expand(Assessor.Value.Number,[a])}else{b=this.expandJSON([a])[0]}}return b},log:function(){this.logs.push(arguments)},dumpLog:function(){var a;if(!console||!console.log){return}for(a=0;a<this.logs.length;a++){console.log.apply(console,this.logs[a])}}};Assessor.Verifier.Collinear=function(a,c,b){this["class"]="Collinear";this.points=[a,c,b]};Assessor.Verifier.Collinear.prototype=new Assessor.Verifier.Verifier;Assessor.extend(Assessor.Verifier.Collinear.prototype,{choose:function(g,f){var e,d,b,a,c=[];for(e=this.points.length-1;e>=0;e--){if(f[this.points[e]]){this.points.push.apply(this.points,this.points.splice(e,1))}}Assessor.Utils.log("number of points",g.points.length);if(f[this.points[0]]){Assessor.Utils.log("point1 fixed");return[]}else{Assessor.Utils.log("point 1 not fixed yet");for(e=0;e<g.points.length;e++){if(f.get(this.points[1])){Assessor.Utils.log("point2 fixed");a=new Assessor.FixtureList(f);a.set(this.points[0],g.points[e]);if(this.verify(g,a)){c.push(a)}}else{Assessor.Utils.log("point 2 not fixed yet");for(d=0;d<g.points.length;d++){if(f.get(this.points[2])){Assessor.Utils.log("point3 fixed");a=new Assessor.FixtureList(f);a.set(this.points[0],g.points[e]);a.set(this.points[1],g.points[d]);if(this.verify(g,a)){c.push(a)}}else{Assessor.Utils.log("point 3 not fixed");for(b=0;b<g.points.length;b++){a=new Assessor.FixtureList(f);a.set(this.points[0],g.points[e]);a.set(this.points[1],g.points[d]);a.set(this.points[2],g.points[b]);if(this.verify(g,a)){c.push(a)}}}}}}}return c},verify:function(f,e){var a,h,g,c,d,b;Assessor.Utils.log("collinear verifiy called");if(this.points.length<3){return false}a=e.get(this.points[0]);h=e.get(this.points[1]);g=e.get(this.points[2]);c=a&&h&&g;if(c&&(g.id===a.id||g.id===h.id||a.id===h.id)){c=false}if(c){Assessor.Utils.log("lets test",a.name,h.name,g.name," for collinearity...");b=Assessor.JXG.Math.crossProduct(a.coords.usrCoords,h.coords.usrCoords);d=Assessor.JXG.Math.Geometry.projectPointToLine(g,{stdform:b});c=Assessor.JXG.Math.Geometry.distance(d.usrCoords.slice(1),g.coords.usrCoords.slice(1))/a.Dist(h)<0.07;if(c){Assessor.Utils.log("collinear: ",a.name,h.name,g.name)}}return c},toJSON:function(){this.parameters='["'+this.points.join('", "')+'"]';return Assessor.Base.prototype.toJSON.call(this)}});Assessor.Verifier.Between=function(c,b,a){this["class"]="Between";this.value=Assessor.Utils.expandNumber(c);this.min=Assessor.Utils.expandNumber(b);this.max=Assessor.Utils.expandNumber(a)};Assessor.Verifier.Between.prototype=new Assessor.Verifier.Verifier;Assessor.extend(Assessor.Verifier.Between.prototype,{choose:function(a,e){var h=this.value.choose(a,e),b,l,f,d,c,g=[];for(f=0;f<h.length;f++){b=this.min.choose(a,h[f]);if(b.length===0){b=[h[f]]}for(d=0;d<b.length;d++){l=this.max.choose(a,b[d]);if(l.length===0){l=[b[d]]}for(c=0;c<l.length;c++){if(this.verify(a,l[c])){g.push(l[c])}}}}return g},verify:function(e,d){var b=this.value.evaluate(e,d),c=this.min.evaluate(e,d),a=this.max.evaluate(e,d);return c<=b&&b<=a},toJSON:function(){this.parameters="["+this.value.toJSON()+", "+this.min.toJSON()+", "+this.max.toJSON()+"]";return Assessor.Base.prototype.toJSON.call(this)}});Assessor.Verifier.Binary=function(a,b){this["class"]="Binary";this.lhs=Assessor.Utils.expandNumber(a);this.rhs=Assessor.Utils.expandNumber(b)};Assessor.Verifier.Binary.prototype=new Assessor.Verifier.Verifier;Assessor.extend(Assessor.Verifier.Binary.prototype,{choose:function(g,e){var d=this.lhs.choose(g,e),f,b=[],c,a;for(c=0;c<d.length;c++){f=this.rhs.choose(g,d[c]);if(f.length===0&&this.verify(g,d[c])){b.push(d[c])}else{for(a=0;a<f.length;a++){if(this.verify(g,f[a])){b.push(f[a])}}}}return b},toJSON:function(){this.parameters="["+this.lhs.toJSON()+", "+this.rhs.toJSON()+"]";return Assessor.Base.prototype.toJSON.call(this)}});Assessor.Verifier.Equals=function(b,c,a){Assessor.Verifier.Binary.call(this,b,c);this["class"]="Equals";this.eps=a||0.00001};Assessor.Verifier.Equals.prototype=new Assessor.Verifier.Binary;Assessor.extend(Assessor.Verifier.Equals.prototype,{verify:function(c,b){var a=this.lhs.evaluate(c,b),d=this.rhs.evaluate(c,b);return Math.abs(a-d)<=this.eps},toJSON:function(){this.parameters="["+this.lhs.toJSON()+", "+this.rhs.toJSON()+", "+this.eps+"]";return Assessor.Base.prototype.toJSON.call(this)}});Assessor.Verifier.Less=function(a,b){Assessor.Verifier.Binary.call(this,a,b);this["class"]="Less"};Assessor.Verifier.Less.prototype=new Assessor.Verifier.Binary;Assessor.extend(Assessor.Verifier.Less.prototype,{verify:function(c,b){var a=this.lhs.evaluate(c,b),d=this.rhs.evaluate(c,b);return a<d}});Assessor.Verifier.LEQ=function(b,c,a){Assessor.Verifier.Binary.call(this,b,c);this["class"]="LEQ";this.eps=a||0.00001};Assessor.Verifier.LEQ.prototype=new Assessor.Verifier.Binary;Assessor.extend(Assessor.Verifier.LEQ.prototype,{verify:function(c,b){var a=this.lhs.evaluate(c,b),d=this.rhs.evaluate(c,b);return a-d<=this.eps},toJSON:function(){return Assessor.Verifier.Equals.prototype.toJSON.call(this)}});Assessor.Verifier.Greater=function(a,b){Assessor.Verifier.Binary.call(this,a,b);this["class"]="Greater"};Assessor.Verifier.Greater.prototype=new Assessor.Verifier.Binary;Assessor.extend(Assessor.Verifier.Greater.prototype,{verify:function(c,b){var a=this.lhs.evaluate(c,b),d=this.rhs.evaluate(c,b);return a>d}});Assessor.Verifier.GEQ=function(b,c,a){Assessor.Verifier.Binary.call(this,b,c);this["class"]="GEQ";this.eps=a||0.00001};Assessor.Verifier.GEQ.prototype=new Assessor.Verifier.Binary;Assessor.extend(Assessor.Verifier.GEQ.prototype,{verify:function(c,b){var a=this.lhs.evaluate(c,b),d=this.rhs.evaluate(c,b);return a-d>=this.eps},toJSON:function(){return Assessor.Verifier.Equals.prototype.toJSON.call(this)}});Assessor.Verifier.Not=function(a){this["class"]="Not";this.verifier=a};Assessor.Verifier.Not.prototype=new Assessor.Verifier.Verifier;Assessor.extend(Assessor.Verifier.Not.prototype,{choose:function(b,a){return this.verifier.choose(b,a)},verify:function(b,a){return !this.verifier.verify(b,a)},toJSON:function(){this.parameters="["+this.verifier.toJSON()+"]"}});Assessor.Verifier.Line=function(b,a,c){this["class"]="Line";this.line=b;this.points=[a,c]};Assessor.Verifier.Line.prototype=new Assessor.Verifier.Verifier;Assessor.extend(Assessor.Verifier.Line.prototype,{choose:function(f,e){var c=[],a,d,b;for(d=0;d<f.lines.length;d++){a=new Assessor.FixtureList(e);a.set(this.line,f.lines[d]);for(b=0;b<2;b++){a.set(this.points[b],f.lines[d]["point"+(b+1)])}if(this.verify(f,a)){c.push(a)}}return c},verify:function(d,c){var b=c.get(this.line),a=c.get(this.points[0]),e=c.get(this.points[1]);return b&&Assessor.JXG.indexOf(d.points,b.point1)>-1&&Assessor.JXG.indexOf(d.points,b.point2)>-1&&((b.point1===a&&b.point2===e)||(b.point1===e&&b.point2===a))},toJSON:function(){this.parameters='["'+this.line+'", "'+this.points.join('", "')+'"]';return Assessor.Base.prototype.toJSON.call(this)}});Assessor.Verifier.Angle=function(b,a,d,c){this["class"]="Angle";this.name=b;this.points=[a,d,c]};Assessor.Verifier.Angle.prototype=new Assessor.Verifier.Verifier;Assessor.extend(Assessor.Verifier.Angle.prototype,{choose:function(h,g){var f,e,c,b,d=[];for(f=0;f<h.angles.length;f++){c=h.angles[f];Assessor.Utils.log("checking out angle",c.name,"with value",c.Value()*180/Math.PI);b=new Assessor.FixtureList(g);b.set(this.name,c);for(e=0;e<3;e++){b.set(this.points[e],Assessor.JXG.getRef(c.board,c.parents[e]))}if(this.verify(h,b)){d.push(b)}}return d},verify:function(e,d){var b=d.get(this.name),f=[d.get(this.points[0]),d.get(this.points[1]),d.get(this.points[2])],c;if(!b){return false}for(c=0;c<3;c++){f[c]=f[c]||Assessor.JXG.getRef(b.board,b.parents[c]);if(f[c].id!==b.parents[c]){Assessor.Utils.log("point",c+1,"is wrong");return false}}return true},toJSON:function(){this.parameters='["'+this.name+'", "'+this.points.join('", "')+'"]';return Assessor.Base.prototype.toJSON.call(this)}});Assessor.Verifier.Polygon=function(b,a){this["class"]="Polygon";this.polygon=b;this.points=Array.prototype.slice.call(arguments,1)};Assessor.Verifier.Polygon.prototype=new Assessor.Verifier.Verifier;Assessor.extend(Assessor.Verifier.Polygon.prototype,{choose:function(f,e){var d,c,g,a,b=[];for(d=0;d<f.polygons.length;d++){g=f.polygons[d];if(this.points.length!==g.vertices.length-1){continue}Assessor.Utils.log("checking out polygon",g.name);a=new Assessor.FixtureList(e);a.set(this.polygon,g);for(c=0;c<this.points.length;c++){a.set(this.points[c],Assessor.JXG.getRef(g.board,g.vertices[c]))}if(this.verify(f,a)){b.push(a)}}return b},verify:function(e,d){var b=d.get(this.polygon),f=[],c;if(!b||b.vertices.length-1!==this.points.length){Assessor.Utils.log("polygon undefined or vertices length doesn't match",b);return false}for(c=0;c<this.points.length;c++){f.push(d.get(this.points[c]))}for(c=0;c<this.points.length;c++){f[c]=f[c]||b.vertices[c];if(f[c].id!==b.vertices[c].id){Assessor.Utils.log("point",c+1,"is wrong");return false}}return true},toJSON:function(){this.parameters='["'+this.polygon+'", "'+this.points.join('", "')+'"]';return Assessor.Base.prototype.toJSON.call(this)}});Assessor.Value.Value=function(){this.namespace="Value";this["class"]="Value";this.parameters="[]"};Assessor.Value.Value.prototype=new Assessor.Base;Assessor.extend(Assessor.Value.Value.prototype,{evaluate:function(b,a){return NaN},choose:function(b,a){return[]}});Assessor.Value.Number=function(a){this["class"]="Number";this.value=a};Assessor.Value.Number.prototype=new Assessor.Value.Value;Assessor.extend(Assessor.Value.Number.prototype,{evaluate:function(b,a){return this.value},toJSON:function(){return this.value.toString()}});Assessor.Value.NumberElements=function(a){this["class"]="NumberElements";this.what=a};Assessor.Value.NumberElements.prototype=new Assessor.Value.Value;Assessor.extend(Assessor.Value.NumberElements.prototype,{evaluate:function(b,a){return b[this.what].length},toJSON:function(){this.parameters='["'+this.what+'"]';return Assessor.Base.prototype.toJSON.call(this)}});Assessor.Value.Angle=function(b){this["class"]="Angle";this.angle=b};Assessor.Value.Angle.prototype=new Assessor.Value.Value;Assessor.extend(Assessor.Value.Angle.prototype,{evaluate:function(f,e){var b,h,g,d,c=e.get(this.angle);if(!c){return false}b=Assessor.JXG.getRef(c.board,c.parents[0]);h=Assessor.JXG.getRef(c.board,c.parents[1]);g=Assessor.JXG.getRef(c.board,c.parents[2]);d=b&&h&&g&&b.id!==h.id&&b.id!==g.id&&h.id!==g.id;if(d){d=Assessor.JXG.Math.Geometry.trueAngle(b,h,g);Assessor.Utils.log("angle &lt;"+b.name+h.name+g.name+" = "+d)}else{d=NaN}return d},choose:function(e,d){var b=[],a,c;if(!d.get(this.angle)){for(c=0;c<e.angles;c++){a=new Assessor.FixtureList(d);a.set(this.angle,e.angles[c])}}return b},toJSON:function(){this.parameters='["'+this.angle+'"]';return Assessor.Base.prototype.toJSON.call(this)}});Assessor.Value.Angle3P=function(a,c,b){this["class"]="Angle3P";this.points=[a,c,b]};Assessor.Value.Angle3P.prototype=new Assessor.Value.Value;Assessor.extend(Assessor.Value.Angle3P.prototype,{evaluate:function(d,c){var a,f,e,b;a=c.get(this.points[0]);f=c.get(this.points[1]);e=c.get(this.points[2]);b=a&&f&&e&&a.id!==f.id&&a.id!==e.id&&f.id!==e.id;if(b){b=Assessor.JXG.Math.Geometry.trueAngle(a,f,e);Assessor.Utils.log("angle &lt;"+a.name+f.name+e.name+" = "+b)}else{b=NaN}return b},choose:function(h,g){var f,e,c,b,a,d=[];for(f=0;f<h.points.length;f++){for(e=0;e<h.points.length;e++){for(c=0;c<h.points.length;c++){a=new Assessor.FixtureList(g);a.set(this.points[0],h.points[f]);a.set(this.points[1],h.points[e]);a.set(this.points[2],h.points[c]);d.push(a)}}}return d},toJSON:function(){this.parameters='["'+this.points.join('", "')+'"]';return Assessor.Base.prototype.toJSON.call(this)}});Assessor.Value.Distance=function(a,b){this["class"]="Distance";this.points=[a,b]};Assessor.Value.Distance.prototype=new Assessor.Value.Value;Assessor.extend(Assessor.Value.Distance.prototype,{evaluate:function(d,c){var a,e,b;a=c.get(this.points[0]);e=c.get(this.points[1]);b=a&&e&&a.id!==e.id;if(b){b=a.Dist(e);Assessor.Utils.log("|"+a.name+e.name+"| = "+b)}else{b=NaN}return b},choose:function(f,e){var d,c,a,b=[];for(d=0;d<f.points.length;d++){for(c=d+1;c<f.points.length;c++){a=new Assessor.FixtureList(e);a.set(this.points[0],f.points[d]);a.set(this.points[1],f.points[c]);b.push(a)}}return b},toJSON:function(){this.parameters='["'+this.points.join('", "')+'"]';return Assessor.Base.prototype.toJSON.call(this)}});Assessor.Value.XY=function(a,b){this["class"]="XY";this.point=a;this.what=b};Assessor.Value.XY.prototype=new Assessor.Value.Value;Assessor.extend(Assessor.Value.XY.prototype,{evaluate:function(b,a){this.what=this.what.toLowerCase&&this.what.toLowerCase()==="y"?"Y":"X";return a.get(this.point)?a.get(this.point)[this.what]():NaN},choose:function(e,d){var b=[],a,c;if(!d.get(this.point)){for(c=0;c<e.points.length;c++){a=new Assessor.FixtureList(d);a.set(this.point,e.points[c]);b.push(a)}}return b},toJSON:function(){this.parameters='["'+this.point+'", "'+this.what+'"]';return Assessor.Base.prototype.toJSON.call(this)}});Assessor.Value.SlopeY=function(a,b){this["class"]="SlopeY";this.line=a;this.what=b};Assessor.Value.SlopeY.prototype=new Assessor.Value.Value;Assessor.extend(Assessor.Value.SlopeY.prototype,{evaluate:function(b,a){this.what=this.what.toLowerCase&&this.what.toLowerCase()==="slope"?"getSlope":"getRise";return a.get(this.line)?a.get(this.line)[this.what]():NaN},choose:function(e,d){var b=[],a,c;if(!d.get(this.line)){for(c=0;c<e.lines.length;c++){a=new Assessor.FixtureList(d);a.set(this.line,e.lines[c]);b.push(a)}}return b},toJSON:function(){this.parameters='["'+this.what+'", "'+this.line+'"]';return Assessor.Base.prototype.toJSON.call(this)}});Assessor.Value.Vertices=function(a){this["class"]="Vertices";this.polygon=a};Assessor.Value.Vertices.prototype=new Assessor.Value.Value;Assessor.extend(Assessor.Value.Vertices.prototype,{evaluate:function(b,a){var c=a.get(this.polygon);if(c){Assessor.Utils.log("polygon",this.polygon,"has",c.vertices.length-1,"vertices")}return c&&c.vertices?c.vertices.length-1:NaN},choose:function(e,d){var b=[],a,c;if(!d.get(this.line)){for(c=0;c<e.polygons.length;c++){a=new Assessor.FixtureList(d);a.set(this.polygon,e.polygons[c]);b.push(a)}}return b},toJSON:function(){this.parameters='["'+this.polygon+'"]';return Assessor.Base.prototype.toJSON.call(this)}});(function(){var c,d,f,e=["assessor","utils","verifier","value"],b="";var a=function(g){document.write('<script type="text/javascript" src="'+g+'"><\/script>')};if(typeof document!=="undefined"&&typeof Assessor==="undefined"){for(c=0;c<document.getElementsByTagName("script").length;c++){d=document.getElementsByTagName("script")[c];if(d.src&&d.src.match(/practice\.js(\?.*)?$/)){b=d.src.replace(/practice\.js(\?.*)?$/,"");for(f=0;f<e.length;f++){(function(g){a(b+g+".js")})(e[f])}}}}if(typeof Assessor!=="undefined"&&typeof module!=="undefined"){module.exports=function(g){Assessor.JXG=g;return Assessor}}})();